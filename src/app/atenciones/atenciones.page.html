<ion-header>
  <ion-toolbar class="header-color">
    <ion-title>
      <ion-grid>
        <ion-row>
          <ion-col size="2" class="iconTitle">
            <ion-menu-button>
              <ion-icon name="reorder-three-outline"></ion-icon>
            </ion-menu-button>
          </ion-col>
          <ion-col size="10">
            <div class="ion-text-center">
              <h2>Atención</h2>
            </div>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content [fullscreen]="false" class="ion-no-padding fondoStrongWhite">
  <div class="fondoContenedor">
    <div class="btnAtras">
      <ion-button fill="clear" (click)="goBack()" class="ion-no-padding" routerDirection='back'>
        <ion-icon name="chevron-back-outline"></ion-icon> Atrás
      </ion-button>
    </div>
    <div class="titulo">
      <h3>CASOS ATENDIDOS</h3>
    </div>

    <div class="contenedorBuscador">
      <form [formGroup]="form">
        <ion-row class="ion-no-padding ion-no-margin">
          <ion-col size="6">
            <ion-label position="floating">Fecha inicial </ion-label>
            <ion-datetime displayFormat="YYYY-MM-DD" min="1940-01-01" [max]="myDate" formControlName="fecha_ini"
            placeholder="AAAA-MM-DD" cancelText="Cancelar" doneText="Aceptar"></ion-datetime>
            <div *ngIf="fecha_ini.invalid && (fecha_ini.dirty || fecha_ini.touched)" class="error-label">
              <p *ngIf="fecha_ini.errors.required">Fecha inicial es requerido</p>
            </div>
          </ion-col>
          <ion-col size="6">
            <ion-label position="floating">Fecha fin </ion-label>
            <ion-datetime displayFormat="YYYY-MM-DD" min="1940-01-01" [max]="myDate" formControlName="fecha_fin"
            placeholder="AAAA-MM-DD" cancelText="Cancelar" doneText="Aceptar"></ion-datetime>
            <div *ngIf="fecha_fin.invalid && (fecha_fin.dirty || fecha_fin.touched)" class="error-label">
              <p *ngIf="fecha_fin.errors.required">Fecha fin es requerido</p>
            </div>
          </ion-col>
        </ion-row>
        <div class="ion-text-center" style="margin-top: -15px;">
          <ion-button shape="round" color="verde" (click)="filtrar()" class="btncolor" style="margin-top: 24px;">
            <ion-icon name="search-outline"></ion-icon>
            Filtrar
          </ion-button>
        </div>
      </form>
    </div>
    
    <div>
      <div class="cardTotales">
        <ion-card class="ion-no-padding ion-no-margin">
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="call-outline"></ion-icon>
              TOTAL GENERAL DE CASOS ATENDIDOS
            </ion-card-title>
          </ion-card-header>        
          <ion-card-content>
            <p>Llamadas Atendidas: <strong>{{ atencionLlamadas }}</strong></p>
            <p>Mensajes Whatsapp Atendidos: <strong>{{ atencionWhatssap }}</strong></p>
            <p>Total Casos Registrados: <ion-badge color="verdeclaro">{{ atencionTotal }}</ion-badge></p>
          </ion-card-content>
        </ion-card>
      </div>

      <div class="cardTipoCaso">
        <ion-card class="ion-no-padding ion-no-margin">
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="call-outline"></ion-icon>
              POR TIPO DE CASO
            </ion-card-title>
          </ion-card-header>        
          <ion-card-content>
            <canvas #barChart></canvas>
          </ion-card-content>
        </ion-card>
      </div>

      <div class="cardAtencion">
        <ion-card class="ion-no-padding ion-no-margin">
          <ion-card-header>
            <ion-card-title>
              <ion-icon name="call-outline"></ion-icon>
              POR TIPO ATENCIÓN
            </ion-card-title>
          </ion-card-header>        
          <ion-card-content>
            <canvas #pieChart></canvas>
          </ion-card-content>
        </ion-card>
      </div>
    </div>
  </div>
</ion-content>

